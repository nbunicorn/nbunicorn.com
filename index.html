<!doctype html>
<html>
  <head>
    <title>nbunicorn - the easiest way from notebook to impact</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <style tyoe="text/css">
      #logo { 
        background-image: url(./img/nbunicorn-text-no-margin.png);
        background-size: contain;
        background-repeat: no-repeat;
        width: 100%;
        height: 0;
        padding-top: 24.35%;
        margin: 20px 0 10px 0;
      }

      body {
        background-color: rgb(246, 248, 250);
      }

      footer {
        margin-top: 30px;
      }

      #incubating {
        margin: 30px 0 30px 0;
      }

      #main {
        margin-top: 20px;
        max-width: 600px;
      }

      .modal-full {
        min-width: 100%;
        margin: 0;
      }

      .modal-full .modal-content {
        min-height: 100vh;
        border-radius: 0px;
        max-width: 600px;
        width: 100%;
        margin: 0 auto;
        border: none;
        padding: 24px;
      }
    </style>
    <script type="text/javascript">

      window.addEventListener('load', function() {

        document.getElementById("signup").addEventListener("submit", function(event){
          event.preventDefault();
          window.location = "https://docs.google.com/forms/d/e/1FAIpQLSdvUx4Xur604v9E5SuaRrUPAx6Cgd-mlgcPWNvtAoADBc-yJQ/viewform?usp=pp_url&entry.1106452456=" + document.getElementsByName('email')[0].value;
        });

        var auth;

        var webAuth = new auth0.WebAuth({
          domain: 'nbunicorn.auth0.com',
          clientID: 'hdVkAV2OPzugycruV7FY0emQlVrVrFDL',
          responseType: 'token id_token',
          scope: 'openid email',
          redirectUri: window.location.href
        });

        var loginBtn = document.getElementById('btn-login');
        var logoutBtn = document.getElementById('btn-logout');

        var alertCanDeploy = document.getElementById('alert-can-deploy');
        var cardCanDeploy = document.getElementById('card-can-deploy');
        var alertNoDeploy = document.getElementById('alert-no-deploy');

        loginBtn.addEventListener('click', function(e) {
          e.preventDefault();
          webAuth.authorize();
        });

        function isLoggedIn(){
          // load auth
          auth = JSON.parse(localStorage.getItem('auth'));

          // set email in subscribe form automatically :D
          document.getElementsByName('email')[0].value = auth.idTokenPayload.email;

          document.getElementById('userId').innerHTML = auth.idTokenPayload.sub;

          // run deploy check
          deployCheck(auth.accessToken);
        }

        function loadDeployer(){
          canDeploy = localStorage.getItem('canDeploy')

          // if can deploy
          if (canDeploy === 'true'){

            // show it
            alertCanDeploy.style.display = 'inline-block';
            cardCanDeploy.style.display = 'inline-block';
            alertNoDeploy.style.display = 'none';
            
          // else hide it
          } else {
            alertCanDeploy.style.display = 'none';
            cardCanDeploy.style.display = 'none';
            alertNoDeploy.style.display = 'inline-block';
          }
        }

        function deployCheck(token){
          var url = new URL("https://app.nbunicorn.com/can_deploy"),
              queryParams = {token: token}
          Object.keys(queryParams).forEach(key => url.searchParams.append(key, queryParams[key]));

          var requestParams = {
            method: "GET",
            mode: "cors"
          };

          // async 
          fetch(url, requestParams)
            .then(function (data) {

              return data.json();

            })
            .then(function (r) {

              if (r.can_deploy == true) {

                localStorage.setItem('canDeploy', 'true');
              } else {

                localStorage.setItem('canDeploy', 'false');
              }

              loadDeployer();

            })
            .catch(function (error) {

              console.log('Request failed', error);

            });

        }

        function authLoop(){
          // if logged in
          if (localStorage.hasOwnProperty('expiresAt')){

            // show logout button
            logoutBtn.style.display = 'inline-block';

            expiresAt = JSON.parse(localStorage.getItem('expiresAt'));

            // if expired
            if (new Date().getTime() > parseInt(expiresAt)) {

              // remove expiry
              localStorage.removeItem('expiresAt');

              // run authorise loop
              webAuth.authorize();
            } else {

              isLoggedIn();
            }
          } else {

            // show login button
            loginBtn.style.display = 'inline-block';
          }
        }

        function logout(){
          // remove expiry
          localStorage.removeItem('expiresAt');
          
          // reload page
          document.location.reload();
        }

        logoutBtn.addEventListener('click', logout);
   

        // async check if login attempted. store result if so
        webAuth.parseHash(function(err, authResult) {

          // if parsed
          if (authResult && authResult.accessToken && authResult.idToken) {
            
            // hide hash
            window.location.hash = '';

            // store result
            localStorage.setItem('auth', JSON.stringify(authResult));
            
            // calculate and store expiry
            expiresAt = authResult.expiresIn * 1000 + new Date().getTime();
            localStorage.setItem('expiresAt', JSON.stringify(expiresAt));

          }

          // check auth
          authLoop();

        });

        // while we wait for the async, show screen based on local storage
        if (localStorage.hasOwnProperty('canDeploy') && localStorage.hasOwnProperty('expiresAt')){
          loadDeployer();
        }
        



        

      });

    </script>
  </head>
  <body>    
    <div class="container" id="main">

      <div class="clearfix" style="height: 47px;">
        <button  id="btn-login" class="float-right btn btn-sm btn-light my-2 my-sm-0" type="submit" style="display:none;">Login with GitHub</button>
        <button  id="btn-logout" class="float-right btn btn-sm btn-light my-2 my-sm-0" type="submit" style="display:none;">Logout</button>
      </div>

      <div class="alert alert-success alert-dismissible fade show" role="alert" id="alert-can-deploy" style="display:none;">
        <h4 class="alert-heading">Welcome!</h4>
        You're in. Welcome to <strong>nbunicorn</strong>! Check out the instructions below to deploy your first notebook in a few simple steps.
        <hr>
        You can also always find more information in <a href='https://nbunicorn.readthedocs.io' target='_blank' class="alert-link">our docs</a>.
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="alert alert-warning" role="alert" id="alert-no-deploy" style="display:none;">
        Uh oh. Looks like your account is not authorised for deployment just yet. Join the waitlist below! (<em>Reference:</em> <code id="userId"></code>)
      </div>
     
      <div id='logo'></div>
      <p class="lead">The easiest way from notebook to impact, so you can focus more on <strong>data science</strong>, and less on <strong>infrastructure</strong>.</p>
      
      <div class="card text-white bg-dark" id="card-can-deploy"  style="display:none; width: 100%;">
        <h6 class="card-header">Quickstart guide</h6>
        <div class="card-body">
          <p><kbd>pip install nbunicorn</kbd> to install the nbunicorn package.</p>
        </div>
      </div>

      <div class="card" id="incubating">
        <div class="card-body">
          <p><strong>nbunicorn</strong> is incubating with new users by invitation. Join the waitlist and we'll keep you up to date on our progress.</p>
          <form id="signup">
            <div class="input-group">
              <input type="email" class="form-control" name="email" placeholder="email@address.com">
              <div class="input-group-append">
                <button class="btn btn-secondary" type="submit">Subscribe</button>
              </div>
            </div>
          </form>
        </div>
      </div>
      <p>
        <h4>Latest updates</h4>
        <ul>
            <li><em>Notebooks, from the heart</em> <a href="https://medium.com/nbunicorn/notebooks-from-the-heart-a93de49db871" class="text-secondary">Read more</a></li>
            <li><em>nbwhat? A primer on notebooks for data science</em> <a href="https://medium.com/nbunicorn/nbwhat-a-primer-on-notebooks-for-data-science-2b48a36ff547" class="text-secondary">Read more</a></li>
        </ul>
      </p>
      <footer>
        <small>
          <div class="row">
            <div class="col-4">
              <a href="#about" class="text-dark" role="button" data-toggle="modal">About</a>
            </div>
            <div class="col-4">
              <a href="http://medium.com/nbunicorn" class="text-dark">Blog</a>
            </div>
            <div class="col-4">
              <a href="http://twitter.com/nbunicorn" class="text-dark">Twitter</a>
            </div>
            <div class="col-4">
              <a href="http://github.com/nbunicorn" class="text-dark">GitHub</a>
            </div>
            <div class="col-4">
              <a href="mailto:hello@nbunicorn.com" class="text-dark">Contact</a>
            </div>
            <div class="col-4">
              <a href="/legal" class="text-dark">Privacy & Terms</a>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <p><center>we <span class="text-danger">&hearts;</span> nb</center></p>
            </div>
          </div>
        </small>
      </footer>

      <div class="modal fade" id="about" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-full" role="document">
          <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">About</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body" id="result">
              <p><img src="https://scontent.fsyd7-1.fna.fbcdn.net/v/t1.0-9/52011388_378653672983495_2187452338778669056_n.jpg?_nc_cat=106&_nc_ht=scontent.fsyd7-1.fna&oh=3bee9cb1b398e9b433870f6962c42971&oe=5D6E9524" width="200px" height="200px" class="mx-auto d-block"></p>
              <p><strong>nbunicorn</strong> is the easiest way to turn a Jupyter notebook into a real product!</p>
              <p>As data scientists, we understand just how difficult it is to create a great algorithm to a worthy problem. As engineers, we also know how challenging deploying, securing and scaling complex data science solutions can be, and we built <strong>nbunicorn</strong> to solve just this.</p>
              <h3>How it works</h3>
              <p>With <strong>nbunicorn</strong>, you have everything you need to go from notebook to product, with only a few lines of code! Just import our package, decorate your functions, and upload your notebook.</p>
              <p>We'll convert it into a REST API, build all the complex dependencies into a container, and deploy it to a highly scalable cluster backed by Google Cloud.</p>
              <p>You can call the API directly, or embed our simple JavaScript client <code>nbunicorn.js</code> to access your functions in a website with ease!</p>
              <h3>Meet the team</h3>
              <h6 class="mt-0">Blair Hudson (<a href='https://twitter.com/blairhudson' target='_blank'>@blairhudson</a>)</h6>
              <div class="media">
                <img class="mr-3" src="https://instagram.fsyd7-1.fna.fbcdn.net/vp/65defaaef10beadf2c84cafaa6cacb03/5D3EDB83/t51.2885-15/e35/c141.0.798.798a/s240x240/57026484_1081237828729900_2371537046527876778_n.jpg?_nc_ht=instagram.fsyd7-1.fna.fbcdn.net" width="110px" height="110px" style="margin-top: 6px">
                <div class="media-body">
                  <small>Blair is the creator of <strong>nbunicorn</strong>. With a passion for data and innovation, and deep experience across commercialisng advanced data-driven solutions, his vision seeks to enable problem solvers everywhere to design and build great data products with ease.</small>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>
    </div>
    <!-- Auth0 -->
    <script src="https://cdn.auth0.com/js/auth0/9.10/auth0.min.js"></script>
    <!-- Bootstrap4 -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134339545-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-134339545-1');
    </script>
  </body>
</html>